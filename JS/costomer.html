<!-- <!DOCTYPE html> -->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../CSS/home.css">
    <link rel="stylesheet" href="../CSS/navbar.css">
    <link rel="stylesheet" href="../CSS/style.css">
    <link rel="stylesheet" href="../CSS/popup.css">
    <script src="./index.js"></script>
    <title>ShippingWars</title>
</head>

<body>

    <nav class="navbar">
        <div class="container">
            <div class="navbar-logo" onclick="loadAllShipments()">
                <img src="../assets/image/logo.png" height="90vh" class="logo" alt="Logo">
            </div>
            <h1>Customer</h1>
            <ul class="navbar-menu">
                <li onclick="AllShipments()"><a>ALL shipments</a></li>
                <li onclick="loadAddShipments()"><a>ADD shipments</a></li>
                <li onclick="loadYourShipments()"><a>Your Shipments</a></li>
                <li onclick="logout()"><a>Logout</a></li>
            </ul>
            <div class="navbar-toggle">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
    </nav>

    <div id="cards-container">
        <!-- Dynamic content will be loaded here -->
    </div>

    <footer>
        <p>&copy; 2024 ShippingWars. All rights reserved.</p>
    </footer>

    <script src="home.js"></script>
    <script src="navbar.js"></script>
    <script src="index.js"></script>
    <script src="shipment.js"></script>
    <script src="submitBid.js"></script>
    <script src="shipmentform.js"></script>
    <script src="addshipments.js"></script>
    <script src="popup.js"></script>
    <script src="login.js"></script>

    <script>
        function loadAllShipments() {
            document.getElementById('content-container').innerHTML = '<h2>All Shipments</h2><p>Loading all shipments...</p>';
            // Add your logic here to load all shipments
            const apiUrl = 'http://localhost:8080/api/shipments/getdata';
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    console.log(data)
                    container.innerHTML = ""
                    const cardContainer = document.createElement('div'); // Create a parent div for all cards
                    cardContainer.classList.add('container-card'); // Add a class to the parent div
                    const Heading = document.createElement('h1'); // Create a parent div for all cards
                    Heading.classList.add('heading');
                    Heading.innerHTML = `Shipments`
                    data.map(shipment => {
                        const card = document.createElement('div');
                        card.classList.add('shipment-card');
                        // Assuming 'shipment' is available in the current context

                        // Create the anchor element
                        const anchor = document.createElement('a');
                        anchor.href = "#";

                        // Create the imagebox div
                        const imagebox = document.createElement('div');
                        imagebox.classList.add('imagebox');

                        // Create the image element
                        const image = document.createElement('img');
                        image.src = shipment.shipment.imageUrl;
                        image.alt = 'Uploaded Image';
                        image.width = '460';
                        image.height = '345';

                        // Append the image to the imagebox
                        imagebox.appendChild(image);

                        // Create the content div
                        const content = document.createElement('div');
                        content.classList.add('content');

                        // Create span elements for shipment details
                        const pickupDateSpan = document.createElement('span');
                        pickupDateSpan.textContent = 'PickUp Date:';
                        const pickupDate = document.createElement('p');
                        pickupDate.appendChild(pickupDateSpan);
                        pickupDate.innerHTML += shipment.shipment.shipmentDate;

                        const deliveryDateSpan = document.createElement('span');
                        deliveryDateSpan.textContent = 'Delivery Date:';
                        const deliveryDate = document.createElement('p');
                        deliveryDate.appendChild(deliveryDateSpan);
                        deliveryDate.innerHTML += shipment.shipment.deliveryDate;

                        const maxBidAmountSpan = document.createElement('span');
                        maxBidAmountSpan.textContent = 'Max Bid Amount:';
                        const maxBidAmount = document.createElement('p');
                        maxBidAmount.appendChild(maxBidAmountSpan);
                        maxBidAmount.innerHTML += shipment.shipment.maxBidAmount;

                        // Append paragraphs to content div
                        content.appendChild(pickupDate);
                        content.appendChild(deliveryDate);
                        content.appendChild(maxBidAmount);

                        // Append imagebox and content to anchor
                        anchor.appendChild(imagebox);
                        anchor.appendChild(content);

                        // Append anchor to card element
                        card.appendChild(anchor);


                        card.addEventListener('click', () => {
                            handleCardClick(shipment.shipment.shipmentId);
                        });
                        // Append the card to the parent div
                        cardContainer.appendChild(card);
                    });
                    container.appendChild(Heading);
                    // Append the parent div to the container
                    container.appendChild(cardContainer);
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // function loadAddShipments() {
        //     document.getElementById('content-container').innerHTML = '<h2>Add Shipment</h2><p>Loading shipment form...</p>';
        //     // Add your logic here to load the add shipment form
        // }

        // function loadYourShipments() {
        //     document.getElementById('content-container').innerHTML = '<h2>Your Shipments</h2><p>Loading your shipments...</p>';
        //     // Add your logic here to load user's shipments
        // }

        function logout() {

            localStorage.clear();

            // Clear session storage
            sessionStorage.clear();

            alert('Logging out...');

            window.location.href = "http://127.0.0.1:5500/";
        }
    </script>
</body>

</html>